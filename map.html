<!DOCTYPE html>
<html>

<head>
    <script src='https://unpkg.com/@antv/l7'></script>
    <script src='https://unpkg.com/@antv/l7@2.0.11'></script>
</head>

<body>
    <div style="min-height: 500px; justify-content: center;position: relative" id="map" />



    <script type="module">

        import * as THREE from 'https://unpkg.com/three/build/three.module.js';
        const { Scene, GaodeMap, PolygonLayer, PointLayer } = window.L7
        //console.log(Scene)

        const scene = new Scene({
            id: 'map',
            map: new GaodeMap({
                style: 'dark',
                center: [4.462456, 51.926517],
                rotation: 15,
                pitch: 45,
                zoom: 4,
            }),
        })

        
        fetch('map.json'
      )
        .then(res => res.json())
        .then(data => {
          const pointLayer = new PointLayer({})
            .source(data.list, {
              parser: {
                type: "json",
                x: "j",
                y: "w"
              }
            })
            .shape("cylinder")
            .size("t", function(level) {
              return [1, 2, level * 2 + 20];
            })
            .color("t", [
              "#094D4A",
              "#146968",
              "#1D7F7E",
              "#289899",
              "#34B6B7",
              "#4AC5AF",
              "#5FD3A6",
              "#7BE39E",
              "#A1EDB8",
              "#CEF8D6"
            ])
            .style({
              opacity: 1.0
            });
          scene.addLayer(pointLayer);
        });


    </script>
    <style>
        html,
        body {
            overflow: hidden;
            margin: 0;
        }

        #map {
            position: absolute;
            top: 0;
            bottom: 0;
            width: 100%;
        }
    </style>
</body>



</html>